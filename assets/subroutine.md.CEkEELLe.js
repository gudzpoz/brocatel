import{_ as l,D as o,c as h,I as e,w as a,a4 as n,l as i,a as s,o as r}from"./chunks/framework.CPGI-sM3.js";const S=JSON.parse('{"title":"Story Subroutines","description":"","frontmatter":{},"headers":[],"relativePath":"subroutine.md","filePath":"subroutine.md"}'),d={name:"subroutine.md"},c=n('<h1 id="story-subroutines" tabindex="-1">Story Subroutines <a class="header-anchor" href="#story-subroutines" aria-label="Permalink to &quot;Story Subroutines&quot;">​</a></h1><p>In programming lanuages, we call them &quot;functions&quot;. In Ink, they are called &quot;tunnels&quot;. But anyway, this kind of structure allows you to reuse stories quite efficiently.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>However, most stories just don&#39;t follow the typical &quot;function&quot; structure: they don&#39;t <em>return</em> properly. This currently usually leads to unexpected results.</p><p>Also, the current WYSIWYG widget does not support calling subroutines.</p></div><h2 id="basic-syntax" tabindex="-1">Basic Syntax <a class="header-anchor" href="#basic-syntax" aria-label="Permalink to &quot;Basic Syntax&quot;">​</a></h2><p>As you have learnt from <a href="./tutorial.html">the tutorial</a>, Brocatel lets you organize your stories with <code># headings</code>, and you can jump to those headings by using <code>[some links to](#headings)</code>. A subroutine is a part of stories that start with some special headings: <code># subroutine { args }</code>. And to use the subroutine, one uses a special kind of link: <code>[{ arg = value }](#subroutine)</code>.</p>',5),k=i("div",{class:"language-markdown vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"markdown"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"# Main Story")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Statistics:")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#DBEDFF","--shiki-light-text-decoration":"underline","--shiki-dark-text-decoration":"underline"}},"{ money = 10 }"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8","--shiki-light-text-decoration":"underline","--shiki-dark-text-decoration":"underline"}},"#stats"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Done!")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"---")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"## stats {money}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Budget: ${money}!")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"---")])])])],-1),p=n('<p>In the example above, a <code>## stats</code> subroutine is defined (which accepts a <code>money</code> parameter), and we jump to the subroutine with a link <code>[{ money = 10 }](#stats)</code>, which also sets the requested parameter <code>money</code> to <code>10</code>. The story outputs three lines:</p><ul><li><code>Statistics:</code></li><li><code>Budget: $10!</code>: The story flows to the subroutine after the link.</li><li><code>Done!</code>: The story flows back to the main story! It resumes the story after the link.</li></ul><h2 id="no-fallthrough" tabindex="-1">No Fallthrough <a class="header-anchor" href="#no-fallthrough" aria-label="Permalink to &quot;No Fallthrough&quot;">​</a></h2><p>In normal stories, headings stop the story flow - we want the users to be explicit about story flow changes so as to avoid errors. And functions require explicit jumps / calls too.</p>',4),u=i("div",{class:"language-markdown vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"markdown"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Line 1.")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"# any heading")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Special case: the first heading is OK - the meaning is explicit enough - it is a starting point.")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"## heading 2")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Then no Line 3.")])])])],-1),g=i("div",{class:"language-markdown vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"markdown"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Line 1.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"<!-- The story ends here -->")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"# any heading {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Never.")])])])],-1),E=i("p",null,[s("Also, a function automatically returns at the end of it, and you may explicitly return with thematic breaks (a single line containing only "),i("code",null,"---"),s(").")],-1),y=i("p",null,"Function calls allows passing values that are only effective inside a certain function.",-1),m=i("div",{class:"language-markdown vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"markdown"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'`from = "outside"`')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"From(1): {from}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#DBEDFF","--shiki-light-text-decoration":"underline","--shiki-dark-text-decoration":"underline"}},'{ from = "foyer" }'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8","--shiki-light-text-decoration":"underline","--shiki-dark-text-decoration":"underline"}},"#west"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"From(5): {from}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"# west {from}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"From(2): {from}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#DBEDFF","--shiki-light-text-decoration":"underline","--shiki-dark-text-decoration":"underline"}},'{ from = "the west" }'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8","--shiki-light-text-decoration":"underline","--shiki-dark-text-decoration":"underline"}},"#south"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"From(4): {from}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF","--shiki-light-font-weight":"bold","--shiki-dark-font-weight":"bold"}},"# south {from}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"From(3): {from}")])])])],-1),f=i("div",{class:"info custom-block"},[i("p",{class:"custom-block-title"},"INFO"),i("p",null,"It is a bit different from function parameters in programming languages. But since it is just a draft, I am not going into detail here.")],-1);function b(_,w,F,C,x,v){const t=o("md-example");return r(),h("div",null,[c,e(t,null,{default:a(()=>[k]),_:1}),p,e(t,null,{default:a(()=>[u]),_:1}),e(t,null,{default:a(()=>[g]),_:1}),E,y,e(t,null,{default:a(()=>[m]),_:1}),f])}const T=l(d,[["render",b]]);export{S as __pageData,T as default};
